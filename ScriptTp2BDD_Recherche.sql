-- -------------------------------------------------
-- Nom de la base de donnees : recherche          --
-- SGBD : MySql                                   --
-- Date de creation : 04/01/2021                  --
-- Auteurs : Lamine BOUGUEROUA / Abdelkrim LAHLOU --
-- -------------------------------------------------


-- Destruction des tables

DROP TABLE IF EXISTS AFF ;
DROP TABLE IF EXISTS PROJET ;
DROP TABLE IF EXISTS CHERCHEUR ;
DROP TABLE IF EXISTS EQUIPE ;


-- Creation de tables

CREATE TABLE EQUIPE(
	NE    INT (2) NOT NULL ,
	NOM   VARCHAR (50) NOT NULL ,
	CONSTRAINT EQUIPE_PK PRIMARY KEY(NE)
)Engine = 'InnoDb';

CREATE TABLE CHERCHEUR(
	NC       INT (6) NOT NULL ,
	NOM      VARCHAR (20) NOT NULL ,
	PRENOM   VARCHAR (20) ,
	NE       INT (2) NOT NULL ,
	CONSTRAINT CHERCHEUR_PK PRIMARY KEY(NC) ,
	CONSTRAINT CHERCHEUR_EQUIPE_FK FOREIGN KEY(NE) REFERENCES EQUIPE(NE)
)Engine = 'InnoDb';

CREATE TABLE PROJET(
	NP       CHAR (3) NOT NULL ,
	NOM      VARCHAR (50) NOT NULL ,
	BUDJET   NUMERIC(10,2) ,
	NE       INT (2) NOT NULL ,
	CONSTRAINT PROJET_PK PRIMARY KEY(NP) ,
	CONSTRAINT PROJET_EQUIPE_FK FOREIGN KEY(NE) REFERENCES EQUIPE(NE)
)Engine = 'InnoDb';

CREATE TABLE AFF(
	NP      CHAR (3) NOT NULL ,
	NC      INT (6) NOT NULL ,
	ANNEE   INT(4)  NOT NULL ,
	CONSTRAINT AFF_PK PRIMARY KEY(NP,NC,ANNEE)	,
	CONSTRAINT AFF_PROJET_FK FOREIGN KEY(NP) REFERENCES PROJET(NP) ,
	CONSTRAINT AFF_CHERCHEUR_FK FOREIGN KEY(NC) REFERENCES CHERCHEUR(NC)
)Engine = 'InnoDb';


-- remplissage des tables

INSERT INTO EQUIPE (NE, NOM) VALUES (1, 'WEB Intelligence');
INSERT INTO EQUIPE (NE, NOM) VALUES (2, 'BIG DATA');
INSERT INTO EQUIPE (NE, NOM) VALUES (3, 'Objets connectes');
INSERT INTO EQUIPE (NE, NOM) VALUES (4, 'Cloud computing');


INSERT INTO CHERCHEUR (NC, NOM, PRENOM, NE) VALUES (1, 'BOUGUEROUA', 'Lamine', 1);
INSERT INTO CHERCHEUR (NC, NOM, PRENOM, NE) VALUES (2, 'WOLSKA', 'Kasia', 1);
INSERT INTO CHERCHEUR (NC, NOM, PRENOM, NE) VALUES (3, 'CHARROUX', 'Benoit', 2);
INSERT INTO CHERCHEUR (NC, NOM, PRENOM, NE) VALUES (4, 'SLIMAN', 'Layth', 2);
INSERT INTO CHERCHEUR (NC, NOM, PRENOM, NE) VALUES (5, 'HUET', 'Jean-Charles', 3);
INSERT INTO CHERCHEUR (NC, NOM, PRENOM, NE) VALUES (6, 'COLIN', 'Elizabeth', 3);
INSERT INTO CHERCHEUR (NC, NOM, PRENOM, NE) VALUES (7, 'MARECHAL', 'Catherine', 3);
INSERT INTO CHERCHEUR (NC, NOM, PRENOM, NE) VALUES (8, 'VIEIRA', 'Dario', 3);
INSERT INTO CHERCHEUR (NC, NOM, PRENOM, NE) VALUES (9, 'NAHLE', 'Salim', 1);
INSERT INTO CHERCHEUR (NC, NOM, PRENOM, NE) VALUES (10, 'NEGGAZ', 'Yessin', 2);
INSERT INTO CHERCHEUR (NC, NOM, PRENOM, NE) VALUES (11, 'OCHI', 'Hanen', 2);
INSERT INTO CHERCHEUR (NC, NOM, PRENOM, NE) VALUES (12, 'FLASQUE', 'Nicolas', 1);
INSERT INTO CHERCHEUR (NC, NOM, PRENOM, NE) VALUES (13, 'RODRIGUES', 'Christiano', 3);


INSERT INTO PROJET (NP, NOM, BUDJET, NE) VALUES ('p01', 'PHC POLONIUM', 120000, 1);
INSERT INTO PROJET (NP, NOM, BUDJET, NE) VALUES ('p02', 'PNAPI', 442000, 1);
INSERT INTO PROJET (NP, NOM, BUDJET, NE) VALUES ('p03', 'Pacific-Clouds avec CAPES - Bresil', 20000, 3);
INSERT INTO PROJET (NP, NOM, BUDJET, NE) VALUES ('p04', 'Chipset action COST', 800000, 1);
INSERT INTO PROJET (NP, NOM, BUDJET, NE) VALUES ('p05', 'QuoVADis', 745000, 1);
INSERT INTO PROJET (NP, NOM, BUDJET, NE) VALUES ('p06', 'RunMyCode', 67000, 2);
INSERT INTO PROJET (NP, NOM, BUDJET, NE) VALUES ('p07', 'Brafitec', 552500, 3);
INSERT INTO PROJET (NP, NOM, BUDJET, NE) VALUES ('p08', 'VIPED', 900000, 3);
INSERT INTO PROJET (NP, NOM, BUDJET, NE) VALUES ('p09', 'Thomas Jefferson Fund grant', 50000, 3);
INSERT INTO PROJET (NP, NOM, BUDJET, NE) VALUES ('p10', 'ANR Franco-Indien', 560000, 2);
INSERT INTO PROJET (NP, NOM, BUDJET, NE) VALUES ('p11', 'HeartLand', 400000, 1);
INSERT INTO PROJET (NP, NOM, BUDJET, NE) VALUES ('p12', 'ZAZI', 20000, 1);
INSERT INTO PROJET (NP, NOM, BUDJET, NE) VALUES ('p13', 'FANTOME', NULL, 1);
 
INSERT INTO AFF (NP, NC, ANNEE) VALUES ('p01', 1, 2018);
INSERT INTO AFF (NP, NC, ANNEE) VALUES ('p01', 1, 2019);
INSERT INTO AFF (NP, NC, ANNEE) VALUES ('p01', 2, 2018);
INSERT INTO AFF (NP, NC, ANNEE) VALUES ('p01', 2, 2019);
INSERT INTO AFF (NP, NC, ANNEE) VALUES ('p01', 7, 2018);
INSERT INTO AFF (NP, NC, ANNEE) VALUES ('p02', 1, 2019);
INSERT INTO AFF (NP, NC, ANNEE) VALUES ('p02', 1, 2020);
INSERT INTO AFF (NP, NC, ANNEE) VALUES ('p02', 1, 2021);
INSERT INTO AFF (NP, NC, ANNEE) VALUES ('p02', 2, 2021);
INSERT INTO AFF (NP, NC, ANNEE) VALUES ('p02', 2, 2020);
INSERT INTO AFF (NP, NC, ANNEE) VALUES ('p02', 2, 2019);
INSERT INTO AFF (NP, NC, ANNEE) VALUES ('p02', 5, 2019);
INSERT INTO AFF (NP, NC, ANNEE) VALUES ('p02', 5, 2020);
INSERT INTO AFF (NP, NC, ANNEE) VALUES ('p02', 5, 2021);
INSERT INTO AFF (NP, NC, ANNEE) VALUES ('p03', 8, 2016);
INSERT INTO AFF (NP, NC, ANNEE) VALUES ('p03', 13, 2016);
INSERT INTO AFF (NP, NC, ANNEE) VALUES ('p03', 8, 2017);
INSERT INTO AFF (NP, NC, ANNEE) VALUES ('p04', 2, 2017);
INSERT INTO AFF (NP, NC, ANNEE) VALUES ('p04', 2, 2018);
INSERT INTO AFF (NP, NC, ANNEE) VALUES ('p04', 1, 2018);
INSERT INTO AFF (NP, NC, ANNEE) VALUES ('p05', 1, 2015);
INSERT INTO AFF (NP, NC, ANNEE) VALUES ('p05', 1, 2014);
INSERT INTO AFF (NP, NC, ANNEE) VALUES ('p06', 4, 2016);
INSERT INTO AFF (NP, NC, ANNEE) VALUES ('p06', 3, 2016);
INSERT INTO AFF (NP, NC, ANNEE) VALUES ('p06', 3, 2017);
INSERT INTO AFF (NP, NC, ANNEE) VALUES ('p06', 4, 2017);
INSERT INTO AFF (NP, NC, ANNEE) VALUES ('p06', 4, 2018);
INSERT INTO AFF (NP, NC, ANNEE) VALUES ('p06', 3, 2018);
INSERT INTO AFF (NP, NC, ANNEE) VALUES ('p07', 8, 2018);
INSERT INTO AFF (NP, NC, ANNEE) VALUES ('p08', 1, 2018);
INSERT INTO AFF (NP, NC, ANNEE) VALUES ('p08', 5, 2018);
INSERT INTO AFF (NP, NC, ANNEE) VALUES ('p08', 6, 2018);
INSERT INTO AFF (NP, NC, ANNEE) VALUES ('p08', 6, 2017);
INSERT INTO AFF (NP, NC, ANNEE) VALUES ('p09', 8, 2018);
INSERT INTO AFF (NP, NC, ANNEE) VALUES ('p09', 8, 2019);
INSERT INTO AFF (NP, NC, ANNEE) VALUES ('p09', 5, 2019);
INSERT INTO AFF (NP, NC, ANNEE) VALUES ('p09', 5, 2018);
INSERT INTO AFF (NP, NC, ANNEE) VALUES ('p09', 4, 2018);
INSERT INTO AFF (NP, NC, ANNEE) VALUES ('p09', 4, 2019);
INSERT INTO AFF (NP, NC, ANNEE) VALUES ('p10', 4, 2017);
INSERT INTO AFF (NP, NC, ANNEE) VALUES ('p10', 3, 2017);
INSERT INTO AFF (NP, NC, ANNEE) VALUES ('p11', 2, 2018);
INSERT INTO AFF (NP, NC, ANNEE) VALUES ('p12', 1, 2017);
INSERT INTO AFF (NP, NC, ANNEE) VALUES ('p12', 3, 2017);
INSERT INTO AFF (NP, NC, ANNEE) VALUES ('p12', 9, 2017);

COMMIT;
